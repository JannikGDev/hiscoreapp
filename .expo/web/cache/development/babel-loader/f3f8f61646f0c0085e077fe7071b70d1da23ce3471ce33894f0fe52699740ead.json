{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nimport * as React from 'react';\nimport { StatusBar } from 'expo-status-bar';\nimport defaultStyles from \"./styles/defaultStyle.js\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport { NavigationContainer } from 'react-navigation/native';\nimport { createNativeStackNavigator } from 'react-navigation/native-stack';\nimport HomeScreen from \"./screens/HomeScreen.js\";\nimport ProfileScreen from \"./screens/ProfileScreen.js\";\nimport RegisterScreen from \"./screens/RegisterScreen.js\";\nimport LoginScreen from \"./screens/LoginScreen.js\";\nimport QuestListScreen from \"./screens/QuestListScreen.js\";\nimport { UserContext } from \"./shared/Contexts.js\";\nimport { IsLoggedIn } from \"./shared/GlobalStorage.js\";\nimport SplashScreen from \"./screens/SplashScreen.js\";\nimport PasswordResetScreen from \"./screens/PasswordResetScreen.js\";\nimport { GetUserData } from \"./shared/CompanionAPI.js\";\nimport { QRScannerScreen } from \"./screens/QRScannerScreen.js\";\nimport QRCodeGeneratorScreen from \"./screens/QRCodeGenerator.js\";\nimport Spacer from \"./shared/Spacer.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar Stack = createNativeStackNavigator();\nexport default function App() {\n  var _React$useState = React.useState(null),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    userState = _React$useState2[0],\n    setUserState = _React$useState2[1];\n  React.useEffect(function () {\n    function checkLogin() {\n      return _checkLogin.apply(this, arguments);\n    }\n    function _checkLogin() {\n      _checkLogin = _asyncToGenerator(function* () {\n        var loggedIn = yield IsLoggedIn();\n        var isAdmin = false;\n        if (loggedIn) {\n          var result = yield GetUserData();\n          loggedIn = loggedIn && result.success;\n          isAdmin = result.response.isAdmin;\n        }\n        var newUserState = _objectSpread({}, userState);\n        newUserState.loggedIn = loggedIn;\n        newUserState.isAdmin = isAdmin;\n        setUserState(newUserState);\n      });\n      return _checkLogin.apply(this, arguments);\n    }\n    checkLogin();\n  }, []);\n  return _jsx(View, {\n    style: {\n      flex: 1,\n      backgroundColor: defaultStyles.container.backgroundColor\n    },\n    children: _jsx(UserContext.Provider, {\n      value: {\n        userState: userState,\n        setUserState: setUserState\n      },\n      children: _jsx(NavigationContainer, {\n        children: _jsxs(Stack.Navigator, {\n          screenOptions: {\n            headerShown: false\n          },\n          children: [userState == null ? _jsx(Stack.Screen, {\n            name: \"Splashscreen\",\n            component: SplashScreen,\n            options: {\n              title: 'Splash'\n            }\n          }) : userState.loggedIn ? _jsxs(_Fragment, {\n            children: [_jsx(Stack.Screen, {\n              name: \"Home\",\n              component: HomeScreen,\n              options: {\n                title: 'Home'\n              }\n            }), _jsx(Stack.Screen, {\n              name: \"Profile\",\n              component: ProfileScreen\n            }), _jsx(Stack.Screen, {\n              name: \"QRScanner\",\n              component: QRScannerScreen\n            }), _jsx(Stack.Screen, {\n              name: \"QuestList\",\n              component: QuestListScreen\n            })]\n          }) : _jsxs(_Fragment, {\n            children: [_jsx(Stack.Screen, {\n              name: \"Login\",\n              component: LoginScreen\n            }), _jsx(Stack.Screen, {\n              name: \"Register\",\n              component: RegisterScreen\n            }), _jsx(Stack.Screen, {\n              name: \"PasswordReset\",\n              component: PasswordResetScreen\n            })]\n          }), userState != null && userState.isAdmin ? _jsx(_Fragment, {\n            children: _jsx(Stack.Screen, {\n              name: \"QRCodeGenerator\",\n              component: QRCodeGeneratorScreen\n            })\n          }) : _jsx(_Fragment, {})]\n        })\n      })\n    })\n  });\n}","map":{"version":3,"names":["React","StatusBar","defaultStyles","StyleSheet","Text","View","Image","Button","NavigationContainer","createNativeStackNavigator","HomeScreen","ProfileScreen","RegisterScreen","LoginScreen","QuestListScreen","UserContext","IsLoggedIn","SplashScreen","PasswordResetScreen","GetUserData","QRScannerScreen","QRCodeGeneratorScreen","Spacer","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","Stack","App","_React$useState","useState","_React$useState2","_slicedToArray","userState","setUserState","useEffect","checkLogin","_checkLogin","apply","arguments","_asyncToGenerator","loggedIn","isAdmin","result","success","response","newUserState","_objectSpread","style","flex","backgroundColor","container","children","Provider","value","Navigator","screenOptions","headerShown","Screen","name","component","options","title"],"sources":["C:/Workspace/Programming/Mobile/hiscoreapp/HI-SCORE/App.js"],"sourcesContent":["import * as React from 'react';\nimport { StatusBar } from 'expo-status-bar';\nimport defaultStyles from './styles/defaultStyle.js';\nimport { StyleSheet, Text, View, Image, Button } from 'react-native';\nimport {NavigationContainer} from 'react-navigation/native';\nimport {createNativeStackNavigator} from 'react-navigation/native-stack';\nimport HomeScreen from './screens/HomeScreen.js'\nimport ProfileScreen from './screens/ProfileScreen.js'\nimport RegisterScreen from './screens/RegisterScreen.js'\nimport LoginScreen from './screens/LoginScreen.js';\nimport QuestListScreen from './screens/QuestListScreen.js'\nimport { UserContext } from './shared/Contexts.js';\nimport { IsLoggedIn } from './shared/GlobalStorage.js';\nimport SplashScreen from './screens/SplashScreen.js';\nimport PasswordResetScreen from './screens/PasswordResetScreen.js';\nimport {GetUserData} from './shared/CompanionAPI.js'\nimport { QRScannerScreen } from './screens/QRScannerScreen.js';\nimport QRCodeGeneratorScreen from './screens/QRCodeGenerator.js';\nimport Spacer from './shared/Spacer.js';\n\nconst Stack = createNativeStackNavigator();\n\nexport default function App() {\n\n  const [userState, setUserState] = React.useState(null);\n\n    //Check if logged in\n    React.useEffect(() => {\n         async function checkLogin() {\n          let loggedIn = await IsLoggedIn();\n          let isAdmin = false;\n\n          if(loggedIn) {\n            let result = await GetUserData();\n            loggedIn = loggedIn && result.success;\n            isAdmin = result.response.isAdmin;\n          }\n         \n\n          let newUserState = {...userState};\n          newUserState.loggedIn = loggedIn;\n          newUserState.isAdmin = isAdmin;\n          setUserState(newUserState);\n         }\n         checkLogin();\n    }, []);\n\n  return (\n\n      <View style={{flex: 1, backgroundColor: defaultStyles.container.backgroundColor}}>\n        <UserContext.Provider  value={{userState, setUserState}}>\n          <NavigationContainer>\n            <Stack.Navigator screenOptions={{\n                headerShown: false\n              }}>\n\n              {(\n                userState == null ?\n                (\n                  <Stack.Screen name=\"Splashscreen\"component={SplashScreen} options={{title: 'Splash'}}/>\n                )\n\n                : userState.loggedIn ?  \n                // Screens only visible when not logged in\n                (<>\n                  <Stack.Screen name=\"Home\"component={HomeScreen} options={{title: 'Home'}}/>\n                  <Stack.Screen name=\"Profile\" component={ProfileScreen} />\n                  <Stack.Screen name=\"QRScanner\" component={QRScannerScreen} />\n                  <Stack.Screen name=\"QuestList\" component={QuestListScreen} />\n                </> ):\n                //Screens only visible when logged in\n                ( <>\n                  <Stack.Screen name=\"Login\" component={LoginScreen} />\n                  <Stack.Screen name=\"Register\" component={RegisterScreen} />\n                  <Stack.Screen name=\"PasswordReset\" component={PasswordResetScreen} />\n                </> )\n              )}\n\n              {(userState != null && userState.isAdmin) ? (<>\n              <Stack.Screen name=\"QRCodeGenerator\" component={QRCodeGeneratorScreen} />\n              </>) : <></>}\n\n                {/*Screens always visible }\n                <Stack.Group navigationKey={userState.loggedIn ? 'user' : 'guest'}>\n                </Stack.Group>\n                */}\n            </Stack.Navigator>\n          </NavigationContainer>\n        </UserContext.Provider>\n      </View>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}