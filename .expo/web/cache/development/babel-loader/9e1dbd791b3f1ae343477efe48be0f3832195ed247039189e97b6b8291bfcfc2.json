{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport React, { useState, useContext } from 'react';\nimport styles from \"../styles/defaultStyle\";\nimport Spacer from \"../shared/Spacer\";\nimport MessageBox from \"../shared/MessageBox\";\nimport { Login } from \"../shared/CompanionAPI\";\nimport { UserContext } from \"../shared/Contexts\";\nimport { IsLoggedIn } from \"../shared/GlobalStorage.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar LoginScreen = function LoginScreen(_ref) {\n  var navigation = _ref.navigation,\n    route = _ref.route;\n  var _useContext = useContext(UserContext),\n    userState = _useContext.userState,\n    setUserState = _useContext.setUserState;\n  var _useState = useState(\"\"),\n    _useState2 = _slicedToArray(_useState, 2),\n    userName = _useState2[0],\n    setUserName = _useState2[1];\n  var _useState3 = useState(\"\"),\n    _useState4 = _slicedToArray(_useState3, 2),\n    password = _useState4[0],\n    setPassword = _useState4[1];\n  var _useState5 = useState(false),\n    _useState6 = _slicedToArray(_useState5, 2),\n    showMessage = _useState6[0],\n    setShowMessage = _useState6[1];\n  var _useState7 = useState(\"\"),\n    _useState8 = _slicedToArray(_useState7, 2),\n    message = _useState8[0],\n    setMessage = _useState8[1];\n  var _useState9 = useState(false),\n    _useState10 = _slicedToArray(_useState9, 2),\n    loginComplete = _useState10[0],\n    setLoginComplete = _useState10[1];\n  return _jsxs(View, {\n    style: styles.pageContainer,\n    children: [_jsx(Text, {\n      style: styles.pageTitle,\n      children: \"Login\"\n    }), _jsx(Spacer, {\n      bottom: 24\n    }), _jsxs(SafeAreaView, {\n      style: {\n        width: '80%'\n      },\n      children: [_jsx(Text, {\n        style: styles.text,\n        children: \"Gebe deinen Benutzernamen und Passwort ein um dich einzuloggen oder registriere dich wenn du noch keinen Account hast.\"\n      }), _jsx(Spacer, {\n        bottom: 12\n      })]\n    }), _jsx(MessageBox, {\n      text: message,\n      show: showMessage,\n      onClose: function onClose() {\n        setShowMessage(false);\n      }\n    }), _jsxs(SafeAreaView, {\n      style: {\n        width: '50%'\n      },\n      children: [_jsx(TextInput, {\n        style: styles.textInput,\n        onChangeText: setUserName,\n        placeholder: \"Benutzername\",\n        value: userName,\n        keyboardType: \"default\",\n        textContentType: \"username\"\n      }), _jsx(TextInput, {\n        style: styles.textInput,\n        onChangeText: setPassword,\n        value: password,\n        placeholder: \"Passwort\",\n        textContentType: \"password\",\n        secureTextEntry: true\n      })]\n    }), _jsx(Spacer, {\n      bottom: 16\n    }), _jsx(View, {\n      style: {\n        width: '50%'\n      },\n      children: _jsx(Button, {\n        title: \"Einloggen\",\n        color: styles.button.color,\n        onPress: _asyncToGenerator(function* () {\n          if (loginComplete) return;\n          if (userName.length == 0 || password.length == 0) {\n            setMessage(\"Bitte gebe einen Benutzernamen und Passwort ein.\");\n            setShowMessage(true);\n            return;\n          }\n          var result = yield Login(userName, password);\n          if (result.statusCode == 401) {\n            setMessage(\"Benutzername und Passwort stimmen nicht überein.\");\n            setShowMessage(true);\n            return;\n          }\n          var newState = _objectSpread({}, userState);\n          newState.loggedIn = yield IsLoggedIn();\n          setUserState(newState);\n          if (!newState.loggedIn) {\n            setMessage(result.message);\n            setShowMessage(true);\n          }\n        })\n      })\n    }), _jsx(Spacer, {\n      bottom: 16\n    }), _jsx(View, {\n      style: {\n        width: '50%'\n      },\n      children: _jsx(Button, {\n        title: \"Registrieren\",\n        color: styles.button.color,\n        onPress: function onPress() {\n          return navigation.navigate('Register');\n        }\n      })\n    }), _jsx(Spacer, {\n      bottom: 16\n    }), _jsx(View, {\n      style: {\n        width: '50%'\n      },\n      children: _jsx(Button, {\n        title: \"Passwort vergessen?\",\n        color: styles.button.color,\n        onPress: function onPress() {\n          return navigation.navigate('PasswordReset');\n        }\n      })\n    })]\n  });\n};\nexport default LoginScreen;","map":{"version":3,"names":["React","useState","useContext","styles","Spacer","MessageBox","Login","UserContext","IsLoggedIn","jsx","_jsx","jsxs","_jsxs","LoginScreen","_ref","navigation","route","_useContext","userState","setUserState","_useState","_useState2","_slicedToArray","userName","setUserName","_useState3","_useState4","password","setPassword","_useState5","_useState6","showMessage","setShowMessage","_useState7","_useState8","message","setMessage","_useState9","_useState10","loginComplete","setLoginComplete","View","style","pageContainer","children","Text","pageTitle","bottom","SafeAreaView","width","text","show","onClose","TextInput","textInput","onChangeText","placeholder","value","keyboardType","textContentType","secureTextEntry","Button","title","color","button","onPress","_asyncToGenerator","length","result","statusCode","newState","_objectSpread","loggedIn","navigate"],"sources":["C:/Workspace/Programming/Mobile/hiscoreapp/HI-SCORE/screens/LoginScreen.js"],"sourcesContent":["import { StyleSheet, Text, View, Image, Button, TextInput, SafeAreaView } from 'react-native';\r\nimport React, {useState, useContext} from 'react';\r\nimport styles from '../styles/defaultStyle';\r\nimport Spacer from '../shared/Spacer'\r\nimport MessageBox from '../shared/MessageBox'\r\nimport { Login } from '../shared/CompanionAPI'\r\nimport { UserContext } from '../shared/Contexts';\r\nimport { IsLoggedIn } from '../shared/GlobalStorage.js'\r\n\r\n\r\n\r\nconst LoginScreen = ({navigation, route}) => {\r\n\r\n    const {userState, setUserState} = useContext(UserContext);\r\n\r\n    const [userName, setUserName] = useState(\"\");\r\n    const [password, setPassword] = useState(\"\");\r\n\r\n    const [showMessage, setShowMessage] = useState(false);\r\n    const [message, setMessage] = useState(\"\");\r\n\r\n    const [loginComplete, setLoginComplete] = useState(false);\r\n\r\n    return (\r\n        <View style={styles.pageContainer}> \r\n\r\n        <Text style={styles.pageTitle}>Login</Text>\r\n\r\n        <Spacer bottom={24} />\r\n        <SafeAreaView style = {{width: '80%'}}>\r\n        <Text style={styles.text}>\r\n            Gebe deinen Benutzernamen und Passwort ein um dich einzuloggen oder registriere dich wenn du noch keinen Account hast.\r\n            </Text>\r\n\r\n        <Spacer bottom={12} />\r\n        </SafeAreaView>\r\n\r\n        <MessageBox \r\n            text={message}\r\n            show={showMessage}\r\n            onClose={() => {\r\n                setShowMessage(false);    \r\n            }}\r\n        />\r\n\r\n    <SafeAreaView style = {{width: '50%'}}>\r\n            <TextInput\r\n                style={styles.textInput}\r\n                onChangeText={setUserName}\r\n                placeholder=\"Benutzername\"\r\n                value={userName}\r\n                keyboardType='default'\r\n                textContentType='username'\r\n            />\r\n            <TextInput\r\n                style={styles.textInput}\r\n                onChangeText={setPassword}\r\n                value={password}\r\n                placeholder=\"Passwort\"\r\n                textContentType='password'\r\n                secureTextEntry={true}\r\n            />\r\n        </SafeAreaView>\r\n\r\n        <Spacer bottom={16} />\r\n\r\n        <View style = {{width: '50%'}}>\r\n            <Button\r\n            title=\"Einloggen\"\r\n            color={styles.button.color}\r\n            onPress={ async () =>\r\n            {\r\n                if(loginComplete)\r\n                    return;\r\n\r\n                if(userName.length == 0 || password.length == 0)\r\n                {\r\n                    setMessage(\"Bitte gebe einen Benutzernamen und Passwort ein.\");\r\n                    setShowMessage(true);\r\n                    return;\r\n                }\r\n                let result = await Login(userName, password);\r\n\r\n                if(result.statusCode == 401) {\r\n                    setMessage(\"Benutzername und Passwort stimmen nicht überein.\");\r\n                    setShowMessage(true);\r\n                    return;\r\n                }\r\n\r\n                let newState = {...userState};\r\n                newState.loggedIn = await IsLoggedIn();\r\n                setUserState(newState);\r\n\r\n                if(!newState.loggedIn) {\r\n                    setMessage(result.message);\r\n                    setShowMessage(true);\r\n                }\r\n            }}\r\n            />\r\n        </View>\r\n\r\n        <Spacer bottom={16} />\r\n\r\n        <View style = {{width: '50%'}}>\r\n            <Button\r\n            title=\"Registrieren\"\r\n            color={styles.button.color}\r\n            onPress={() =>\r\n                navigation.navigate('Register')\r\n            }\r\n            />\r\n        </View>\r\n\r\n        <Spacer bottom={16} />\r\n\r\n        <View style = {{width: '50%'}}>\r\n            <Button\r\n            title=\"Passwort vergessen?\"\r\n            color={styles.button.color}\r\n            onPress={() =>\r\n                navigation.navigate('PasswordReset')\r\n            }\r\n            />\r\n        </View>\r\n\r\n        </View>\r\n    )\r\n}\r\n\r\nexport default LoginScreen;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}