{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport * as SecureStore from 'expo-secure-store';\nvar jwtKey = \"jwt\";\nfunction save(_x, _x2) {\n  return _save.apply(this, arguments);\n}\nfunction _save() {\n  _save = _asyncToGenerator(function* (key, value) {\n    yield SecureStore.setItemAsync(key, JSON.stringify(value));\n  });\n  return _save.apply(this, arguments);\n}\nfunction getValueFor(_x3) {\n  return _getValueFor.apply(this, arguments);\n}\nfunction _getValueFor() {\n  _getValueFor = _asyncToGenerator(function* (key) {\n    return yield SecureStore.getItemAsync(key).then(function (value) {\n      return JSON.parse(value);\n    }).catch(function (error) {\n      console.error(error);\n      return null;\n    });\n  });\n  return _getValueFor.apply(this, arguments);\n}\nexport var GetJWTKey = function () {\n  var _ref = _asyncToGenerator(function* () {\n    var tokenObject = yield getValueFor(jwtKey);\n    if (!tokenObject || !tokenObject.token || !tokenObject.expiration) return null;\n    return tokenObject.token;\n  });\n  return function GetJWTKey() {\n    return _ref.apply(this, arguments);\n  };\n}();\nexport var IsLoggedIn = function () {\n  var _ref2 = _asyncToGenerator(function* () {\n    var tokenObject = yield getValueFor(jwtKey);\n    if (!tokenObject || !tokenObject.token || !tokenObject.expiration) return false;\n    var expirationDate = new Date(tokenObject.expiration);\n    var now = new Date();\n    if (now > expirationDate) return false;\n    return true;\n  });\n  return function IsLoggedIn() {\n    return _ref2.apply(this, arguments);\n  };\n}();\nexport var SetLoggedIn = function () {\n  var _ref3 = _asyncToGenerator(function* (tokenObject) {\n    yield save(jwtKey, tokenObject);\n  });\n  return function SetLoggedIn(_x4) {\n    return _ref3.apply(this, arguments);\n  };\n}();\nexport var LogOut = function () {\n  var _ref4 = _asyncToGenerator(function* () {\n    yield SecureStore.deleteItemAsync(jwtKey);\n  });\n  return function LogOut() {\n    return _ref4.apply(this, arguments);\n  };\n}();","map":{"version":3,"names":["SecureStore","jwtKey","save","_x","_x2","_save","apply","arguments","_asyncToGenerator","key","value","setItemAsync","JSON","stringify","getValueFor","_x3","_getValueFor","getItemAsync","then","parse","catch","error","console","GetJWTKey","_ref","tokenObject","token","expiration","IsLoggedIn","_ref2","expirationDate","Date","now","SetLoggedIn","_ref3","_x4","LogOut","_ref4","deleteItemAsync"],"sources":["C:/Workspace/Programming/Mobile/hiscoreapp/HI-SCORE/shared/GlobalStorage.js"],"sourcesContent":["import * as SecureStore from 'expo-secure-store';\r\nconst jwtKey = \"jwt\";\r\n\r\nasync function save(key, value) {\r\n    await SecureStore.setItemAsync(key, JSON.stringify(value));\r\n}\r\n  \r\nasync function getValueFor(key) {\r\n    return await SecureStore.getItemAsync(key)\r\n    .then(value => {\r\n        return JSON.parse(value);\r\n    })\r\n    .catch(error => {\r\n        console.error(error);\r\n        return null;\r\n    });\r\n}\r\n\r\nexport const GetJWTKey = async () => {\r\n    var tokenObject = await getValueFor(jwtKey);\r\n    if(!tokenObject || !tokenObject.token || !tokenObject.expiration)\r\n        return null;\r\n    \r\n    return tokenObject.token;\r\n}\r\n\r\nexport const IsLoggedIn = async () => {\r\n    let tokenObject = await getValueFor(jwtKey);\r\n\r\n    if(!tokenObject || !tokenObject.token || !tokenObject.expiration)\r\n        return false;\r\n\r\n    let expirationDate = new Date(tokenObject.expiration);\r\n    let now = new Date();\r\n    if(now > expirationDate)\r\n        return false;\r\n\r\n    return true;\r\n}\r\n\r\nexport const SetLoggedIn = async (tokenObject) => {\r\n    await save(jwtKey,tokenObject);\r\n}\r\n\r\nexport const LogOut = async () => {\r\n    await SecureStore.deleteItemAsync(jwtKey);\r\n}"],"mappings":";AAAA,OAAO,KAAKA,WAAW,MAAM,mBAAmB;AAChD,IAAMC,MAAM,GAAG,KAAK;AAAC,SAENC,IAAIA,CAAAC,EAAA,EAAAC,GAAA;EAAA,OAAAC,KAAA,CAAAC,KAAA,OAAAC,SAAA;AAAA;AAAA,SAAAF,MAAA;EAAAA,KAAA,GAAAG,iBAAA,CAAnB,WAAoBC,GAAG,EAAEC,KAAK,EAAE;IAC5B,MAAMV,WAAW,CAACW,YAAY,CAACF,GAAG,EAAEG,IAAI,CAACC,SAAS,CAACH,KAAK,CAAC,CAAC;EAC9D,CAAC;EAAA,OAAAL,KAAA,CAAAC,KAAA,OAAAC,SAAA;AAAA;AAAA,SAEcO,WAAWA,CAAAC,GAAA;EAAA,OAAAC,YAAA,CAAAV,KAAA,OAAAC,SAAA;AAAA;AAAA,SAAAS,aAAA;EAAAA,YAAA,GAAAR,iBAAA,CAA1B,WAA2BC,GAAG,EAAE;IAC5B,aAAaT,WAAW,CAACiB,YAAY,CAACR,GAAG,CAAC,CACzCS,IAAI,CAAC,UAAAR,KAAK,EAAI;MACX,OAAOE,IAAI,CAACO,KAAK,CAACT,KAAK,CAAC;IAC5B,CAAC,CAAC,CACDU,KAAK,CAAC,UAAAC,KAAK,EAAI;MACZC,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC;MACpB,OAAO,IAAI;IACf,CAAC,CAAC;EACN,CAAC;EAAA,OAAAL,YAAA,CAAAV,KAAA,OAAAC,SAAA;AAAA;AAED,OAAO,IAAMgB,SAAS;EAAA,IAAAC,IAAA,GAAAhB,iBAAA,CAAG,aAAY;IACjC,IAAIiB,WAAW,SAASX,WAAW,CAACb,MAAM,CAAC;IAC3C,IAAG,CAACwB,WAAW,IAAI,CAACA,WAAW,CAACC,KAAK,IAAI,CAACD,WAAW,CAACE,UAAU,EAC5D,OAAO,IAAI;IAEf,OAAOF,WAAW,CAACC,KAAK;EAC5B,CAAC;EAAA,gBANYH,SAASA,CAAA;IAAA,OAAAC,IAAA,CAAAlB,KAAA,OAAAC,SAAA;EAAA;AAAA,GAMrB;AAED,OAAO,IAAMqB,UAAU;EAAA,IAAAC,KAAA,GAAArB,iBAAA,CAAG,aAAY;IAClC,IAAIiB,WAAW,SAASX,WAAW,CAACb,MAAM,CAAC;IAE3C,IAAG,CAACwB,WAAW,IAAI,CAACA,WAAW,CAACC,KAAK,IAAI,CAACD,WAAW,CAACE,UAAU,EAC5D,OAAO,KAAK;IAEhB,IAAIG,cAAc,GAAG,IAAIC,IAAI,CAACN,WAAW,CAACE,UAAU,CAAC;IACrD,IAAIK,GAAG,GAAG,IAAID,IAAI,CAAC,CAAC;IACpB,IAAGC,GAAG,GAAGF,cAAc,EACnB,OAAO,KAAK;IAEhB,OAAO,IAAI;EACf,CAAC;EAAA,gBAZYF,UAAUA,CAAA;IAAA,OAAAC,KAAA,CAAAvB,KAAA,OAAAC,SAAA;EAAA;AAAA,GAYtB;AAED,OAAO,IAAM0B,WAAW;EAAA,IAAAC,KAAA,GAAA1B,iBAAA,CAAG,WAAOiB,WAAW,EAAK;IAC9C,MAAMvB,IAAI,CAACD,MAAM,EAACwB,WAAW,CAAC;EAClC,CAAC;EAAA,gBAFYQ,WAAWA,CAAAE,GAAA;IAAA,OAAAD,KAAA,CAAA5B,KAAA,OAAAC,SAAA;EAAA;AAAA,GAEvB;AAED,OAAO,IAAM6B,MAAM;EAAA,IAAAC,KAAA,GAAA7B,iBAAA,CAAG,aAAY;IAC9B,MAAMR,WAAW,CAACsC,eAAe,CAACrC,MAAM,CAAC;EAC7C,CAAC;EAAA,gBAFYmC,MAAMA,CAAA;IAAA,OAAAC,KAAA,CAAA/B,KAAA,OAAAC,SAAA;EAAA;AAAA,GAElB"},"metadata":{},"sourceType":"module","externalDependencies":[]}